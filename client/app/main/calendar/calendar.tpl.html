<!--
  Index of all active projects
  This template loads for the 'main.projects' state (app.js)
-->
<ion-view title="Calendar" 
      left-buttons="leftButtons" 
      right-buttons="rightButtons"
      hide-back-button="true">

  <ion-content has-header="true" class="darker-bg">
    <!-- Courtesy Message -->
    <div ng-show="!overDue && !calendar" class="courtesy-message">
      {{ courtesyMessage }}
    </div>

    <ion-list>
      <!-- Over Due Events -->
      <div ng-show="overDue.length">
        <div class="item item-darker item-divider">Over Due</div>
        <a class="item item-thumbnail-left-wide" 
           ng-repeat="event in overDue | orderBy:'orderingDate'" 
           type="item-text-wrap" 
           href="#/main/projects/{{ event.projectId }}">

          <img class="thumbnail" src="{{ event.photo }}">
          <h2>{{ event.title }}</h2>
          <p>
            {{ event.projectTitle }}</br>
            Due {{ event.date | moment.fromNow }}
          </p>
        </a>
      </div>

      <!-- Future Events Calendar -->
      <!-- TODO: why are the months sorting correctly?? -->
      <div ng-repeat="(month, events) in calendar">
        <div class="item item-darker item-divider">{{ month | moment.formatLong }}</div>
        <a class="item item-thumbnail-left-wide" 
           ng-repeat="event in events | orderBy:'orderingDate'" 
           type="item-text-wrap" 
           href="#/main/projects/{{event.projectId}}">

          <img class="thumbnail" src="{{ event.photo }}">
          <h2>{{ event.title }}</h2>
          <p>
            {{ event.projectTitle }}</br>
            Due {{ event.date | moment.fromNow }}
          </p>
        </a>
      <div>

    </ion-list>
  </ion-content>

</ion-view>
